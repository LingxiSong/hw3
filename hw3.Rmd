---
output: html_document
---

Homework 3 - Lego Sales
========================================================

### Task 0 - Load the data

```{r message = FALSE}
library(dplyr)
sales = readRDS("lego_sales.rds")
```


### Task 1 - Tidying the data

<!-- Covert the `sales` object into a tidy data frame. Be sure to include a write up of your methods. -->

```{r}


sales = readRDS("lego_sales.rds")
nullrm=function(v){
ifelse(as.character(v)=="NULL",NA,v)
}
# extract = function(x, i){
#   x[i]
# }
hobbies = map(sales, 'hobbies')

hobby_1 = lapply(hobbies, function(x) x[1])
hobby_2 = lapply(hobbies, function(x) x[2])
hobby_3 = lapply(hobbies, function(x) x[3])

df1 = data_frame(
  gender=map_chr(sales, 'gender'),
  first_name = map_chr(sales, 'first_name'),
  last_name = map_chr(sales, 'last_name'),
  age = map_chr(sales, 'age'),
  phone_number = map_chr(sales, 'phone_number', .default=NA),
  hobbies = map(sales, 'hobbies')
                 )%>%
  mutate(hobby1 = nullrm(hobby_1)) %>%  
  mutate(hobby2 = nullrm(hobby_2)) %>% 
  mutate(hobby3 = nullrm(hobby_3)) %>%select(-one_of('hobbies'))

```



<br/>

## Task 2 - Processing the data


1. What are the three most common first names of purchasers?

```{r}
```

2. What are the five most popular lego sets based on these data?

```{r}
```

3. Which four customers have spent the most money so far and how much have they spent?

```{r}
```

4. Which lego theme has made the most money for lego?

```{r}
```

5. Do men or women buy more lego sets (per person) on average?

```{r}
```

6. What are the five most popular hobbies of lego purchasers?

```{r}
```

7. How many total pieces have been purchased from lego by these customers?

```{r}
```

8. Which area code has spent the most money on legos?

```{r}
```


